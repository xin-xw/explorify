{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xinwng/Projects/Explorify/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xinwng/Projects/Explorify/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xinwng/Projects/Explorify/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{makeStyles,Grid,Typography,Avatar,withStyles,Box}from\"@material-ui/core\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{gridContainer:{direction:\"row\",justifyContent:\"center\",alignItems:\"center\",padding:10,marginTop:50,marginBottom:30},large:{margin:10,width:theme.spacing(9),height:theme.spacing(9)},font:{fontFamily:\"Yeseva One\",fontSize:\"3.3em\",color:\"#000\"},gridItem:{}};});var CustomColor=withStyles({root:{fontSize:\"3.3em\",// background: \"-webkit-linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\n// background: \"linear-gradient(to right, #de6262, #ffb88c)\",\nbackground:\"linear-gradient(to right, #d3cce3, #e9e4f0)\",WebkitBackgroundClip:\"text\",WebkitTextFillColor:\"transparent\"}})(Typography);export default function GetUserData(_ref){var auth=_ref.auth,onChange=_ref.onChange;var classes=useStyles();var token=auth.token;// console.log(\"user_data\", token);\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),user_data=_useState2[0],set_user_data=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),user_id=_useState4[0],set_user_id=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),user_name=_useState6[0],set_user_name=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),user_image=_useState8[0],set_user_image=_useState8[1];useEffect(function(){function retrieve_data(){return _retrieve_data.apply(this,arguments);}function _retrieve_data(){_retrieve_data=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"https://api.spotify.com/v1/me\";_context.next=3;return axios.get(\"\".concat(url),{headers:{Authorization:\"Bearer \".concat(token)}});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);if(data){handle_retrieve_data(data);}case 7:case\"end\":return _context.stop();}}},_callee);}));return _retrieve_data.apply(this,arguments);}retrieve_data();},[onChange,token]);useEffect(function(){onChange(user_id);},[onChange,user_id]);function handle_retrieve_data(data){set_user_data(data);set_user_name(data.display_name);set_user_image(data.images[0].url);set_user_id(data.id);}return/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.gridContainer,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,align:\"center\",children:/*#__PURE__*/_jsx(Avatar,{src:user_image,alt:\"user_image\",className:classes.large})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,align:\"center\",className:classes.gridItem,children:[/*#__PURE__*/_jsx(Typography// style={{ textShadow: \"1px 1px 1px black\" }}\n,{className:classes.font,display:\"inline\",children:\"welcome to explorify,\"}),/*#__PURE__*/_jsxs(CustomColor,{className:classes.font,display:\"inline\",children:[\" \",user_name]}),/*#__PURE__*/_jsxs(Typography,{className:classes.font,display:\"inline\",children:[\" \",\"\\uD83D\\uDC4B\"]})]})]});}","map":{"version":3,"sources":["/Users/xinwng/Projects/Explorify/client/src/component/get_user_data.js"],"names":["React","useState","useEffect","makeStyles","Grid","Typography","Avatar","withStyles","Box","axios","useStyles","theme","gridContainer","direction","justifyContent","alignItems","padding","marginTop","marginBottom","large","margin","width","spacing","height","font","fontFamily","fontSize","color","gridItem","CustomColor","root","background","WebkitBackgroundClip","WebkitTextFillColor","GetUserData","auth","onChange","classes","token","user_data","set_user_data","user_id","set_user_id","user_name","set_user_name","user_image","set_user_image","retrieve_data","url","get","headers","Authorization","data","console","log","handle_retrieve_data","display_name","images","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  makeStyles,\n  Grid,\n  Typography,\n  Avatar,\n  withStyles,\n  Box,\n} from \"@material-ui/core\";\nimport axios from \"axios\";\n\nconst useStyles = makeStyles((theme) => ({\n  gridContainer: {\n    direction: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 10,\n    marginTop: 50,\n    marginBottom: 30,\n  },\n  large: {\n    margin: 10,\n    width: theme.spacing(9),\n    height: theme.spacing(9),\n  },\n  font: {\n    fontFamily: \"Yeseva One\",\n    fontSize: \"3.3em\",\n    color: \"#000\",\n  },\n  gridItem: {},\n}));\n\nconst CustomColor = withStyles({\n  root: {\n    fontSize: \"3.3em\",\n    // background: \"-webkit-linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\n    // background: \"linear-gradient(to right, #de6262, #ffb88c)\",\n    background: \"linear-gradient(to right, #d3cce3, #e9e4f0)\",\n\n    WebkitBackgroundClip: \"text\",\n    WebkitTextFillColor: \"transparent\",\n  },\n})(Typography);\n\nexport default function GetUserData({ auth, onChange }) {\n  const classes = useStyles();\n  const { token } = auth;\n  // console.log(\"user_data\", token);\n  const [user_data, set_user_data] = useState(null);\n  const [user_id, set_user_id] = useState(\"\");\n  const [user_name, set_user_name] = useState(\"\");\n  const [user_image, set_user_image] = useState(\"\");\n\n  useEffect(() => {\n    async function retrieve_data() {\n      const url = \"https://api.spotify.com/v1/me\";\n      const { data } = await axios.get(`${url}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      console.log(data);\n      if (data) {\n        handle_retrieve_data(data);\n      }\n    }\n    retrieve_data();\n  }, [onChange, token]);\n\n  useEffect(() => {\n    onChange(user_id);\n  }, [onChange, user_id]);\n\n  function handle_retrieve_data(data) {\n    set_user_data(data);\n    set_user_name(data.display_name);\n    set_user_image(data.images[0].url);\n    set_user_id(data.id);\n  }\n\n  return (\n    <Grid container className={classes.gridContainer}>\n      <Grid item xs={12} align=\"center\">\n        <Avatar\n          src={user_image}\n          alt=\"user_image\"\n          className={classes.large}\n        ></Avatar>\n      </Grid>\n      <Grid item xs={12} align=\"center\" className={classes.gridItem}>\n        <Typography\n          // style={{ textShadow: \"1px 1px 1px black\" }}\n          className={classes.font}\n          display=\"inline\"\n        >\n          welcome to explorify,\n        </Typography>\n        <CustomColor className={classes.font} display=\"inline\">\n          {\" \"}\n          {user_name}\n        </CustomColor>\n        <Typography className={classes.font} display=\"inline\">\n          {\" \"}\n          ğŸ‘‹\n        </Typography>\n\n        {/* </div> */}\n      </Grid>\n    </Grid>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}