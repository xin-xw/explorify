{"ast":null,"code":"import _regeneratorRuntime from\"/Users/xinwng/Projects/Explorify/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/xinwng/Projects/Explorify/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/xinwng/Projects/Explorify/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{makeStyles,Paper,Grid,TextField,Button,Typography,Box}from\"@material-ui/core\";import{Search}from\"@material-ui/icons\";import SearchResults from\"./search_results\";import MusicNoteIcon from\"@material-ui/icons/MusicNote\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles({root:{marginTop:\"5px\",justifyContent:\"center\",alignItems:\"center\"},search_bar:{display:\"flex\",\"flex-direction\":\"row\",maxWidth:500,justify:\"center\",padding:7,margin:\"auto\",backgroundColor:\"#ffe8d6\",boxShadow:\"2px 2px 7px rgba(0, 0, 0, 0.4)\",borderRadius:10,// minHeight: 150,\nmarginBottom:30},search_result:{// paddingTop: -10,\n// marginTop: -20,\ncolor:\"#000\"},selected_seeds:{// paddingTop: 10,\n// marginTop: 20,\nmaxWidth:400},selected_seeds_header:{fontSize:18,marginTop:-5,fontWeight:\"600\",marginLeft:13,textAlign:\"left\"// paddingTop: 3,\n// marginTop: 20,\n// maxWidth: 350,\n},selected_seeds_songs:{fontSize:14,lineHeight:2,marginLeft:20,textAlign:\"left\"// fontWeight: \"600\",\n// paddingTop: 3,\n// marginTop: 20,\n// maxWidth: 350,\n}});export default function SearchBar(_ref){var auth=_ref.auth,onChange=_ref.onChange;var classes=useStyles();var token=auth.token;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),search_result=_useState2[0],set_search_result=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),search_string=_useState4[0],set_search_string=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),seleceted_seeds=_useState6[0],set_selected_seeds=_useState6[1];function spotify_search_songs(){return _spotify_search_songs.apply(this,arguments);}function _spotify_search_songs(){_spotify_search_songs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,search_query,search_type_query,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"https://api.spotify.com/v1/search\";search_query=encodeURIComponent(search_string);// console.log(\"search_query\", search_query);\nsearch_type_query=\"type=track\";// console.log(\"token\", token);\n_context.next=5;return axios.get(\"\".concat(url,\"?q=\").concat(search_query,\"&\").concat(search_type_query),{headers:{Authorization:\"Bearer \".concat(token)}});case 5:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);if(data&&data.tracks){set_search_result(data.tracks.items);}case 9:case\"end\":return _context.stop();}}},_callee);}));return _spotify_search_songs.apply(this,arguments);}useEffect(function(){onChange(seleceted_seeds);},[onChange,seleceted_seeds]);// console.log(\"search_result\", search_result);\nreturn/*#__PURE__*/_jsxs(Grid,{container:true// style={{ \"align-items\": \"flex-end\" }}\n,spacing:0,justify:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{className:classes.search_bar,children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",variant:\"outlined\",placeholder:\"enter reference tracks...\",fullWidth:true,InputLabelProps:{shrink:true},onChange:function onChange(e){return set_search_string(e.target.value);},onKeyDown:function onKeyDown(e){console.log(e.key);if(e.key===\"Enter\"){spotify_search_songs();}},value:search_string}),/*#__PURE__*/_jsx(Button,{style:{marginLeft:5,backgroundColor:\"#B7B7A4\",color:\"#2b2d42\"},onClick:spotify_search_songs,variant:\"contained\",children:/*#__PURE__*/_jsx(MusicNoteIcon,{style:{fontSize:35}})})]})}),/*#__PURE__*/_jsx(Box,{className:classes.search_results,children:/*#__PURE__*/_jsx(SearchResults,{results:search_result,onChange:set_selected_seeds})})]});}","map":{"version":3,"sources":["/Users/xinwng/Projects/Explorify/client/src/component/search_bar.js"],"names":["React","useState","useEffect","axios","makeStyles","Paper","Grid","TextField","Button","Typography","Box","Search","SearchResults","MusicNoteIcon","useStyles","root","marginTop","justifyContent","alignItems","search_bar","display","maxWidth","justify","padding","margin","backgroundColor","boxShadow","borderRadius","marginBottom","search_result","color","selected_seeds","selected_seeds_header","fontSize","fontWeight","marginLeft","textAlign","selected_seeds_songs","lineHeight","SearchBar","auth","onChange","classes","token","set_search_result","search_string","set_search_string","seleceted_seeds","set_selected_seeds","spotify_search_songs","url","search_query","encodeURIComponent","search_type_query","get","headers","Authorization","data","console","log","tracks","items","shrink","e","target","value","key","search_results"],"mappings":"2WAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACEC,UADF,CAEEC,KAFF,CAGEC,IAHF,CAIEC,SAJF,CAKEC,MALF,CAMEC,UANF,CAOEC,GAPF,KAQO,mBARP,CASA,OAASC,MAAT,KAAuB,oBAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,8BAA1B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAGV,UAAU,CAAC,CAC3BW,IAAI,CAAE,CACJC,SAAS,CAAE,KADP,CAEJC,cAAc,CAAE,QAFZ,CAGJC,UAAU,CAAE,QAHR,CADqB,CAM3BC,UAAU,CAAE,CACVC,OAAO,CAAE,MADC,CAEV,iBAAkB,KAFR,CAGVC,QAAQ,CAAE,GAHA,CAIVC,OAAO,CAAE,QAJC,CAKVC,OAAO,CAAE,CALC,CAMVC,MAAM,CAAE,MANE,CAOVC,eAAe,CAAE,SAPP,CAQVC,SAAS,CAAE,gCARD,CASVC,YAAY,CAAE,EATJ,CAUV;AACAC,YAAY,CAAE,EAXJ,CANe,CAmB3BC,aAAa,CAAE,CACb;AACA;AACAC,KAAK,CAAE,MAHM,CAnBY,CAwB3BC,cAAc,CAAE,CACd;AACA;AACAV,QAAQ,CAAE,GAHI,CAxBW,CA6B3BW,qBAAqB,CAAE,CACrBC,QAAQ,CAAE,EADW,CAErBjB,SAAS,CAAE,CAAC,CAFS,CAGrBkB,UAAU,CAAE,KAHS,CAIrBC,UAAU,CAAE,EAJS,CAKrBC,SAAS,CAAE,MACX;AACA;AACA;AARqB,CA7BI,CAuC3BC,oBAAoB,CAAE,CACpBJ,QAAQ,CAAE,EADU,CAEpBK,UAAU,CAAE,CAFQ,CAGpBH,UAAU,CAAE,EAHQ,CAIpBC,SAAS,CAAE,MACX;AACA;AACA;AACA;AARoB,CAvCK,CAAD,CAA5B,CAmDA,cAAe,SAASG,CAAAA,SAAT,MAAuC,IAAlBC,CAAAA,IAAkB,MAAlBA,IAAkB,CAAZC,QAAY,MAAZA,QAAY,CACpD,GAAMC,CAAAA,OAAO,CAAG5B,SAAS,EAAzB,CACA,GAAQ6B,CAAAA,KAAR,CAAkBH,IAAlB,CAAQG,KAAR,CAEA,cAA2C1C,QAAQ,CAAC,EAAD,CAAnD,wCAAO4B,aAAP,eAAsBe,iBAAtB,eACA,eAA2C3C,QAAQ,CAAC,EAAD,CAAnD,yCAAO4C,aAAP,eAAsBC,iBAAtB,eACA,eAA8C7C,QAAQ,CAAC,EAAD,CAAtD,yCAAO8C,eAAP,eAAwBC,kBAAxB,eANoD,QAQrCC,CAAAA,oBARqC,sKAQpD,gMACQC,GADR,CACc,mCADd,CAEQC,YAFR,CAEuBC,kBAAkB,CAACP,aAAD,CAFzC,CAGE;AACMQ,iBAJR,CAI4B,YAJ5B,CAKE;AALF,sBAMyBlD,CAAAA,KAAK,CAACmD,GAAN,WAClBJ,GADkB,eACTC,YADS,aACOE,iBADP,EAErB,CACEE,OAAO,CAAE,CACPC,aAAa,kBAAYb,KAAZ,CADN,CADX,CAFqB,CANzB,uCAMUc,IANV,kBAMUA,IANV,CAcEC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAIA,IAAI,EAAIA,IAAI,CAACG,MAAjB,CAAyB,CACvBhB,iBAAiB,CAACa,IAAI,CAACG,MAAL,CAAYC,KAAb,CAAjB,CACD,CAjBH,sDARoD,uDA4BpD3D,SAAS,CAAC,UAAM,CACduC,QAAQ,CAACM,eAAD,CAAR,CACD,CAFQ,CAEN,CAACN,QAAD,CAAWM,eAAX,CAFM,CAAT,CAIA;AAEA,mBACE,MAAC,IAAD,EACE,SAAS,KACT;AAFF,CAGE,OAAO,CAAE,CAHX,CAIE,OAAO,CAAC,QAJV,wBAME,KAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,uBACE,MAAC,GAAD,EAAK,SAAS,CAAEL,OAAO,CAACvB,UAAxB,wBACE,KAAC,SAAD,EACE,EAAE,CAAE,gBADN,CAEE,OAAO,CAAE,UAFX,CAGE,WAAW,CAAC,2BAHd,CAIE,SAAS,KAJX,CAKE,eAAe,CAAE,CACf2C,MAAM,CAAE,IADO,CALnB,CAQE,QAAQ,CAAE,kBAACC,CAAD,QAAOjB,CAAAA,iBAAiB,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAxB,EARZ,CASE,SAAS,CAAE,mBAACF,CAAD,CAAO,CAChBL,OAAO,CAACC,GAAR,CAAYI,CAAC,CAACG,GAAd,EACA,GAAIH,CAAC,CAACG,GAAF,GAAU,OAAd,CAAuB,CACrBjB,oBAAoB,GACrB,CACF,CAdH,CAeE,KAAK,CAAEJ,aAfT,EADF,cAkBE,KAAC,MAAD,EACE,KAAK,CAAE,CACLV,UAAU,CAAE,CADP,CAELV,eAAe,CAAE,SAFZ,CAGLK,KAAK,CAAE,SAHF,CADT,CAME,OAAO,CAAEmB,oBANX,CAOE,OAAO,CAAC,WAPV,uBASE,KAAC,aAAD,EAAe,KAAK,CAAE,CAAEhB,QAAQ,CAAE,EAAZ,CAAtB,EATF,EAlBF,GADF,EANF,cAuCE,KAAC,GAAD,EAAK,SAAS,CAAES,OAAO,CAACyB,cAAxB,uBACE,KAAC,aAAD,EAAe,OAAO,CAAEtC,aAAxB,CAAuC,QAAQ,CAAEmB,kBAAjD,EADF,EAvCF,GADF,CA0DD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  makeStyles,\n  Paper,\n  Grid,\n  TextField,\n  Button,\n  Typography,\n  Box,\n} from \"@material-ui/core\";\nimport { Search } from \"@material-ui/icons\";\nimport SearchResults from \"./search_results\";\nimport MusicNoteIcon from \"@material-ui/icons/MusicNote\";\n\nconst useStyles = makeStyles({\n  root: {\n    marginTop: \"5px\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  search_bar: {\n    display: \"flex\",\n    \"flex-direction\": \"row\",\n    maxWidth: 500,\n    justify: \"center\",\n    padding: 7,\n    margin: \"auto\",\n    backgroundColor: \"#ffe8d6\",\n    boxShadow: \"2px 2px 7px rgba(0, 0, 0, 0.4)\",\n    borderRadius: 10,\n    // minHeight: 150,\n    marginBottom: 30,\n  },\n  search_result: {\n    // paddingTop: -10,\n    // marginTop: -20,\n    color: \"#000\",\n  },\n  selected_seeds: {\n    // paddingTop: 10,\n    // marginTop: 20,\n    maxWidth: 400,\n  },\n  selected_seeds_header: {\n    fontSize: 18,\n    marginTop: -5,\n    fontWeight: \"600\",\n    marginLeft: 13,\n    textAlign: \"left\",\n    // paddingTop: 3,\n    // marginTop: 20,\n    // maxWidth: 350,\n  },\n  selected_seeds_songs: {\n    fontSize: 14,\n    lineHeight: 2,\n    marginLeft: 20,\n    textAlign: \"left\",\n    // fontWeight: \"600\",\n    // paddingTop: 3,\n    // marginTop: 20,\n    // maxWidth: 350,\n  },\n});\n\nexport default function SearchBar({ auth, onChange }) {\n  const classes = useStyles();\n  const { token } = auth;\n\n  const [search_result, set_search_result] = useState([]);\n  const [search_string, set_search_string] = useState(\"\");\n  const [seleceted_seeds, set_selected_seeds] = useState([]);\n\n  async function spotify_search_songs() {\n    const url = \"https://api.spotify.com/v1/search\";\n    const search_query = encodeURIComponent(search_string);\n    // console.log(\"search_query\", search_query);\n    const search_type_query = \"type=track\";\n    // console.log(\"token\", token);\n    const { data } = await axios.get(\n      `${url}?q=${search_query}&${search_type_query}`,\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    console.log(data);\n    if (data && data.tracks) {\n      set_search_result(data.tracks.items);\n    }\n  }\n\n  useEffect(() => {\n    onChange(seleceted_seeds);\n  }, [onChange, seleceted_seeds]);\n\n  // console.log(\"search_result\", search_result);\n\n  return (\n    <Grid\n      container\n      // style={{ \"align-items\": \"flex-end\" }}\n      spacing={0}\n      justify=\"center\"\n    >\n      <Grid item xs={12}>\n        <Box className={classes.search_bar}>\n          <TextField\n            id={\"outlined-basic\"}\n            variant={\"outlined\"}\n            placeholder=\"enter reference tracks...\"\n            fullWidth\n            InputLabelProps={{\n              shrink: true,\n            }}\n            onChange={(e) => set_search_string(e.target.value)}\n            onKeyDown={(e) => {\n              console.log(e.key);\n              if (e.key === \"Enter\") {\n                spotify_search_songs();\n              }\n            }}\n            value={search_string}\n          ></TextField>\n          <Button\n            style={{\n              marginLeft: 5,\n              backgroundColor: \"#B7B7A4\",\n              color: \"#2b2d42\",\n            }}\n            onClick={spotify_search_songs}\n            variant=\"contained\"\n          >\n            <MusicNoteIcon style={{ fontSize: 35 }} />\n          </Button>\n        </Box>\n      </Grid>\n      {/* <Grid item xs={12} sm={6}> */}\n      <Box className={classes.search_results}>\n        <SearchResults results={search_result} onChange={set_selected_seeds} />\n      </Box>\n      {/* </Grid> */}\n      {/* <Grid item xs={12} sm={6}> */}\n      {/* <Typography className={classes.selected_seeds_header}>\n          Your selected seeds will appear here\n        </Typography> */}\n      {/* <Paper className={classes.selected_seeds}>\n          {seleceted_seeds.map((songs, index) => (\n            <Typography className={classes.selected_seeds_songs}>\n              {index + 1}. {songs}\n            </Typography>\n          ))}\n        </Paper>\n      </Grid> */}\n    </Grid>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}